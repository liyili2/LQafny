\section{\qafny Evaluation and Case Studies}
\label{sec:arith-oqasm}

\begin{figure*}[t]
{\small
\begin{tabular}{|l|c|c|c|}
\hline
Algorithm & Running Time (seconds)  & Human Resources (days) & Number of Lines \\
                     \hline
GHZ & 4.2 & < 1 & 13 \\
Controlled GHZ & 6.4 & < 1 & 15  \\
Deutschâ€“Jozsa & 3.3 & < 1 & 11 \\
Grover's search & 26.7 &  2 & 19 \\
Shor's algorithm & 36.3 & 30 & 28  \\
Quantum Walk & 43.1 & 2 & 35 \\
\hline                           
\end{tabular}
}
\caption{Computer running time and human labor time for verifying algorithms in \qafny. Running time is measured in a i7 windows computer. Every algorithm is verified by a single person, thus the human resources measure the time for a person to finish programming and verifying an algorithm. The quantum walk algorithm is the core of the Childs' Boolean equation algorithm \cite{ChildsNAND}.}
\label{fig:circ-evaluation}
\end{figure*}

We evaluate QNP by (1) demonstrating how quantum algorithms are verified in the framework, and (2) showing that it saves the time for programmers to write and verify quantum programs, especially, it helps them to discover possible new ways of integrating quantum operations.
%
This section presents the facts about verifying quantum programs in \qafny. Then, we discuss two case studies, including the verification of the controlled GHZ, Grover's search, and Shor's algorithm, as a demonstration of verifying quantum algorithms in \qafny.

\Cref{fig:circ-evaluation} shows the algorithms being verified in \qafny. When we started the QNP project, we first tried to verify Shor's algorithm directly on Dafny, which spent a researcher 30 days to finish. After that, we built the \qafny compiler on Dafny, and run a \qafny version of the Shor's algorithm proof, which is much more cleaner than the code written directly in Dafny. The running time for that proof is 36.3 seconds. In fact, running any \qafny verification does not take more than a minute to finish, which is relatively comparable with most nowadays automated verification framework \cite{DBLP:conf/pldi/Qiu0SM13,dafnyref}, and better than the existing quantum automated frameworks, such as QBricks \cite{qbricks}.

The computer running time is usually a less important factor in verifying programs, while the human effort is the more important issues. We believe that QNP saves a great amount of human resources. This fact is indicated by the number of lines in writing the algorithm specifications in \qafny. As shown in \Cref{fig:circ-evaluation}, all the algorithms are written with less than 35 lines of code. One of the examples is the Shor's algorithm specification written in the \qafny interface in \Cref{fig:shorexample}.
In contrast, most algorithms written in other quantum automated verification frameworks require more than 1000 lines of code.
For example, the Grover's search specification in quantum Haore Logic \cite{qhoreusage} has 3184 lines of code, and the Shor's algorithm specification in QBricks \cite{qbricks} has 1163 lines of code \footnote{We do not mean to compare the coding lines to other frameworks since the coding line numbers might be varied depending on many factors, but we only provide a hint on the automation in \qafny.}.
In terms of human resources, other than Shor's algorithm, which was done before the \qafny compiler was fully constructed, most algorithms were written and verified in \qafny (\Cref{fig:circ-evaluation}) in two days by a single researcher. 
As a comparison, the complete Shor's algorithm correctness proof \cite{shorsprove} was finished by four researchers that spent two years. Even the oracle in the Shor's algorithm, the modulo multiplication circuit, was verified by three researchers that spent four months. Therefore, QNP help relieve programmers' pain in reasoning about quantum programs.

As a consequence, QNP also helps programmers in discovering new ways of utilizing quantum algorithms. The controlled GHZ algorithm does not typically appear in many quantum information books \cite{mike-and-ike}, but it is a nice usage of the GHZ algorithm to prepare different entanglement structures. The implementation and verification of the controlled GHZ algorithm finishes momentarily (\Cref{fig:circ-evaluation}).










